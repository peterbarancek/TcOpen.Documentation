<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Custom libraries | TcOpen </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Custom libraries | TcOpen ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../../favicon.png">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc">
    <meta property="docfx:tocrel" content="../../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <p class="text-logo">TcOpen</p>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../articles/intro.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a href="../../../api/index.html" title="API reference">API reference</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../../intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Conventions</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Conventions/Conventions.html" title="General" class="">General</a>
                          </li>
                          <li class="">
                            <a href="../../Conventions/Component.html" title="Components" class="">Components</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">TcOpen Framework</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../TcOpenFramework/application.html" title="Application" class="">Application</a>
                          </li>
                          <li class="">
                            <a href="../../TcOpenFramework/messaging.html" title="Messaging" class="">Messaging</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">TcOpen Inxton</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Inxton/Colors_wpf.html" title="Colors Material Design WPF" class="">Colors Material Design WPF</a>
                          </li>
                          <li class="">
                            <a href="../../Inxton/InxtonConventions.html" title="Inxton Conventions" class="">Inxton Conventions</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Inxton.Vortex.Framework.Blazor</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../Inxton/Inxton_vortex_framework_blazor/Inxton_vortex_framework_blazor.html" title="Introduction and installing" class="">Introduction and installing</a>
                                </li>
                                <li class="">
                                  <a href="../../Inxton/Inxton_vortex_framework_blazor/Renderablecontentcontrol.html" title="RenderableContentControl" class="">RenderableContentControl</a>
                                </li>
                                <li class="">
                                  <a href="../../Inxton/Inxton_vortex_framework_blazor/Layouts.html" title="Layouts" class="">Layouts</a>
                                </li>
                                <li class="active">
                                  <a href="../../Inxton/Inxton_vortex_framework_blazor/Custom_libraries.html" title="Custom libraries" class="active">Custom libraries</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="custom-libraries">Custom libraries</h1>

<p>To create a custom components library, you have to create two projects:</p>
<ul>
<li><strong>Connector project</strong> - which will contain PLC compiled classes from Inxton Builder.</li>
<li><strong>Razor components project</strong> - Razor class library, which will contain the implementation of corresponding views. Also, there must be a dependency on the Connector project.</li>
</ul>
<p>It's important to note that the generated classes in the Connector project and created Razor views must be in <strong>same namespace</strong> to correctly locate views.</p>
<p>See the example below:</p>
<p>We have three projects:</p>
<ul>
<li><em>ComponentsExamples</em> - custom components library</li>
<li><em>InxtonBlazor.App</em> - Blazor Server application</li>
<li><em>PlcConnector</em> - class library containing generated files from Inxton Builder</li>
</ul>
<p>Files in the <em>ComponentsExample</em> and the <em>PlcConnector</em> are in the same namespace. <em>InxtonBlazor.App</em> has a reference to the <em>ComponentsExample</em> project.</p>
<p><img src="assets/external.png" alt="alt text" title="Renderignore and custom labels"></p>
<p><em>ComponentsExamples</em> library must contain <code>RenderableBlazorAssemblyAttribute()</code>. Thanks to this attribute RenderableContentControl is able to load its assembly and find all created custom view.</p>
<p>You can add this attribute to <code>AssemblyInfo.cs</code> class located in <code>Properties</code> folder. If there is no <code>Properties</code> folder, just create it with <code>AssemblyInfo.cs</code> class and paste there following code:</p>
<pre><code class="lang-C#">using Vortex.Presentation.Blazor.Attributes;

[assembly: RenderableBlazorAssemblyAttribute()]
</code></pre>
<p>If your PLC defined type has a C# counterpart in a <code>PlcConnector</code> project and <code>ComponentsExamples</code> contains a corresponding Razor view, it will be rendered by the RenderableContentControl.</p>
<p>There are two ways how to implement custom component:</p>
<ul>
<li>Custom component with <strong>code-behind</strong></li>
<li>Custom component with <strong>ViewModel</strong> support</li>
</ul>
<h2 id="component-with-code-behind">Component with code-behind</h2>
<p>This is simple approach, where your Blazor view inherits from <code>RenderableComplexComponentBase&lt;T&gt;</code> base class, where <code>T</code> is your custom component PLC type. However logic of your component must be specified in code-behind of view class. Important is, that both view and code-behind must be in same namespace as your <code>PlcConnector</code>.</p>
<p>Look at the example below:</p>
<p>Blazor view <code>VortexComponentServiceView.razor</code>:</p>
<pre><code class="lang-C#">@namespace Plc
@inherits RenderableComplexComponentBase&lt;VortexComponent&gt;

&lt;h3&gt;VortexComponentServiceView&lt;/h3&gt;

&lt;p&gt;VortexBool serviceView: @Component.vortex_bool.Cyclic&lt;/p&gt;
&lt;p&gt;VortexInt serviceView: @Component.vortex_int.Cyclic&lt;/p&gt;
&lt;p&gt;VortexString serviceView: @Component.vortex_string.Cyclic&lt;/p&gt;

</code></pre>
<p><code>VortexComponentServiceView.razor</code> view inherits from <code>RenderableComplexComponentBase&lt;VortexComponent&gt;</code>. Thanks to this, framework will inject instance of <em>VortexComponent</em> type into <em>Component</em> variable. After that, you can access values of <em>Component</em> variable and define logic of your custom component in code-behind. Code-behind must be partial class with the same name as view.</p>
<p>Code-behind <code>VortexComponentServiceView.cs</code>:</p>
<pre><code class="lang-C#">namespace Plc
{
    public partial class VortexComponentServiceView
    {
        protected override void OnInitialized()
        {
            UpdateValuesOnChange(Component);
        }
    }
}

</code></pre>
<p>If you want your UI to be updated everytime, when PLC values change, you must call <code>UpdateValuesOnChange(Component)</code> method in <code>OnInitialized()</code> method in code-behind.</p>
<h2 id="component-with-viewmodel">Component with ViewModel</h2>
<p>With this approach you can create component using MVVM design pattern. With MVVM, implementation of view and logic of your component is separated. Therefore your code is loosely coupled, more testable and reusable.</p>
<p>First, you need to create your ViewModel, which will inherits from abstract class <code>RenderableViewModelBase</code>:</p>
<p>ViewModel <code>VortexComponentBaseViewModel.cs</code></p>
<pre><code class="lang-C#">namespace Plc
{
    public class VortexComponentBaseViewModel : RenderableViewModelBase
    {
        public VortexComponentBaseViewModel()
        {
        }
        public VortexComponent Component { get;  set; }
        public override object Model { get =&gt; this.Component; set { this.Component = value as VortexComponent; } }
    }
}
</code></pre>
<p>After that, you can create your Blazor view <code>VortexComponentBaseView.razor</code>:</p>
<pre><code class="lang-C#">@namespace Plc
@inherits RenderableViewModelComponentBase&lt;VortexComponentBaseViewModel&gt;

&lt;h3&gt;VortexComponentBaseView&lt;/h3&gt;

&lt;p&gt;VortexBool baseView: @ViewModel.Component.vortex_bool.Cyclic&lt;/p&gt;
&lt;p&gt;VortexInt baseView: @ViewModel.Component.vortex_int.Cyclic&lt;/p&gt;
&lt;p&gt;VortexString baseView: @ViewModel.Component.vortex_string.Cyclic&lt;/p&gt;

@code
{
    protected override void OnInitialized()
    {
        UpdateValuesOnChange(ViewModel.Component);
    }
}

</code></pre>
<p>Your view must inherits from <code>RenderableViewModelComponentBase&lt;T&gt;</code> base class, where <code>T</code> is type of your ViewModel. Thanks to this, ViewModel instance is created and initialized with PLC type instance acquired within <code>RenderableContentControl</code>. After that, you are able to access your ViewModel within Blazor view.</p>
<p>If you want your UI update everytime, when PLC values change, you can add <code>UpdatesValuesOnChange(ViewModel.Component)</code> directly to code section in view, or you can create partial class same as in previous example.</p>
<p>When you call RenderableContentControl component like this:</p>
<pre><code>&lt;RenderableContentControl Presentation=&quot;Base&quot;
                          Context=&quot;@Entry.Plc.MAIN.instanceOfVortexComponent&quot;&gt;

&lt;/RenderableContentControl&gt;
</code></pre>
<p>You will get generated UI, which you specified in your custom view:</p>
<p><img src="assets/baseview.png" alt="alt text" title="Renderignore and custom labels"></p>
<p>View contains real-time values from PLC.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TcOpenGroup/TcOpen.Documentation/blob/dev/articles/Inxton/Inxton_vortex_framework_blazor/Custom_libraries.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <p>Generated by <strong>DocFX</strong> | Delivered by TcOpenGroup contributors</p>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
